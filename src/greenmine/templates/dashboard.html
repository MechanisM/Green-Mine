{% extends "base.html" %}
{% load url from future %}
{% load i18n %}

{% block wrapper %}
<div id="dashboard">
    <div id="dashboard-actions">
        <a id="new-milestone" class="btn01" href="">Nuevo milestone</a>
        <a id="new-issue" class="btn01" href="">Nueva tarea</a>
    </div>

    <ul id="milestones">
        {% for mls in project.milestones.all %}
        <li class="milestone {% if forloop.first %}selected{% endif %}" 
            milestone="{{ mls.id }}" url="{{ mls.get_tasks_for_milestone_api_url }}"
            editurl="{{ mls.get_edit_api_url }}">
            <div class="ml"><span class="name">{{ mls.name }}</span>
                <div><span class="estimated_finish">{% if mls.estimated_finish %}{{ mls.estimated_finish }}{% endif %}</span> 
                (<span class="issue">1/2</span>)</div>
            </div>
            <a href="" class="edit"></a>
        </li>
        {% endfor %}
        <li class="milestone" milestone="0" url="{{ project.get_unasigned_tasks_api_url }}">
            <div class="ml"><span class="name">{% trans "Unassigned" %}</span><div>(<span class="issue">4/20</span>)</div></div>
        </li>
    </ul>

    <div id="tasks-filters">
        <p>
            {{ filtersform.to.label }}
            {{ filtersform.to }}
        </p>
        <p>
            {{ filtersform.state.label }}
            {{ filtersform.state }}
        </p>
        <p>
            {{ filtersform.priority.label }}
            {{ filtersform.priority }}
        </p>
        <p>
            {{ filtersform.type.label }}
            {{ filtersform.type }}
        </p>                    
    </div>
    <ul id="tasks">
    </ul>

    <div id="milestone-lb">
        <form method="post" action="" editaction="auxiliar/json/milestone.json" newaction="{{ project.get_milestone_create_api_url }}">
            <fieldset>
                <p class="form-field">
                    <label for="">Nombre</label>
                    <input type="text" id="nombre-milestone" name="name" class="required" />
                </p>
                <p class="form-field">
                    <label for="">Fecha fin</label>
                    <input type="text" readonly id="fecha-milestone" name="estimated_finish" class="datepicker" />
                </p>
                <p class="width100 float-left">
                    <a id="close-milestone-lb" class="btn01" href="">Cancelar</a>    
                    <input class="btn01" type="submit" value="Guardar" />
                    <span class="ajax-loader"></span>
                </p>
            </fieldset>
            <input type="hidden" name="id" />
        </form>                    
    </div>
    <div id="issue-lb">
        <form method="post" action="" editaction="auxiliar/json/task.json" newaction="{{ project.get_issue_create_api_url }}">
            <fieldset>
                <p class="form-field">
                    <label for="">Nombre</label>
                    <input type="text" id="nombre-issue" name="subject" class="required" />
                </p>
                <p class="form-field">
                    <label>Tipo</label>
                    <select class="required" name="type">
                        <option value="task">Tarea</option>
                        <option value="bug">Bug</option>
                    </select>                                
                </p>                              
                <p class="form-field">
                    <label>Estado</label>
                    <select class="required" name="type">
                        <option value="Abierta">Abierta</option>
                        <option value="Cerrada">Cerrada</option>
                    </select>                                
                </p>                                  
                <p class="form-field width100">
                    <label for="">Descripci√≥n</label>
                    <textarea name="description"></textarea>
                </p>                          
                <p class="width100 float-left">
                    <a id="close-issue-lb" class="btn01" href="">Cancelar</a>    
                    <input class="btn01" type="submit" value="Guardar" />
                    <span class="ajax-loader"></span>
                </p>
                <p class="width100 float-left mt10">
                    <input class="btn01" type="submit" value="Guardar e ir al detalle" />
                </p>
            </fieldset>
            <input type="hidden" name="id" />
        </form>                    
    </div>                
</div>
{% endblock %}
